{"version":19,"variables":[{"version":1,"key":"service","type":"query","visible":true,"editable":true,"input":"\n\tfetch spans\n\t| filter contains(span.name, \"feature_flag_evaluation\")\n    | dedup servlet.context.name\n    | fields servlet.context.name","multiple":false},{"version":1,"key":"feature_flag_key","type":"query","visible":true,"editable":true,"input":"fetch spans\n| filter contains(span.name, \"feature_flag_evaluation\")\n| filter isNotNull(feature_flag.key)\n| dedup feature_flag.key\n| fields feature_flag.key\n| sort feature_flag.key","multiple":false},{"key":"feature_group","visible":true,"type":"query","version":1,"editable":true,"input":"fetch events\n| filter event.type == \"CUSTOM_CONFIGURATION\" \n| filter category == \"featureflag\"\n| dedup feature_flag_key\n| fields feature_flag_key\n| sort feature_flag_key","multiple":true,"defaultValue":["3420b2ac-f1cf-4b24-b62d-61ba1ba8ed05*"]},{"version":1,"key":"selected_config","type":"query","visible":false,"editable":true,"input":"fetch events\n| filter event.type == \"CUSTOM_CONFIGURATION\" \n| filter category == \"featureflag\" \n| filter feature_flag_key == $feature_flag_key\n| sort timestamp desc\n| fields timestamp\n| limit 10","multiple":false},{"version":1,"key":"variants","type":"query","visible":true,"editable":true,"input":"fetch spans\n| filter feature_flag.key == $feature_flag_key\n| fields feature_flag.result.value\n| summarize variant = collectDistinct(feature_flag.result.value)\n| expand variant\n| sort variant","multiple":true,"defaultValue":["3420b2ac-f1cf-4b24-b62d-61ba1ba8ed05*"]},{"version":1,"key":"environments","type":"query","visible":true,"editable":true,"input":"\n\tfetch spans\n\t| filter contains(span.name, \"feature_flag_evaluation\")\n    | dedup feature_flag.environment\n    | fields feature_flag.environment","multiple":false}],"tiles":{"4":{"title":"Response rates","type":"data","query":"fetch spans\n| filter feature_flag.key == $feature_flag_key\n| filter in(feature_flag.result.value, Array($variants))\n| filter in(servlet.context.name, Array($service))\n| join [ fetch spans \n    | filter span.kind == \"server\" AND request.is_root_span == true\n], on: { left[trace.id] == right[trace.id] }, prefix:\"server.\"\n| makeTimeseries { avg=avg(server.duration) }, by: { feature_flag.result.value }","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisScaling":"analyzedTimeframe","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["dt.davis.timeout"],"leftYAxisSettings":{},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg"]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg"],"value":"sparkline","id":1756311539566}],"columnOrder":["[\"timeframe\",\"start\"]","[\"timeframe\",\"end\"]","[\"interval\"]","[\"avg\"]","[\"feature_flag.result.value\"]"]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false,"unitsOverrides":[{"identifier":"avg","unitCategory":"time","baseUnit":"nanosecond","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1750094079849}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"7":{"title":"Change Events over time","type":"data","query":"fetch events\n| filter event.type == \"CUSTOM_CONFIGURATION\" \n| filter category == \"featureflag\" \n| filter in(feature_flag_key, Array($feature_group))\n| fieldsAdd \n    config_marker = 1,\n    config_time = formatTimestamp(timestamp, format: \"HH:mm:ss\")\n| fields timestamp, config_marker, config_time\n| sort timestamp desc\n| limit 10","visualization":"barChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisScaling":"analyzedTimeframe","xAxisLabel":"timestamp","xAxisIsLabelVisible":false,"hiddenLegendFields":["config_marker"],"fieldMapping":{"timestamp":"timestamp","leftAxisValues":["config_marker"]},"leftYAxisSettings":{},"legend":{"hidden":true},"seriesOverrides":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{"value":"config_marker"},"displayedFields":["config_time"],"truncationMode":"middle","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"8":{"title":"Error rates","type":"data","query":"fetch spans\n| filter feature_flag.key == $feature_flag_key\n| filter in(feature_flag.result.value, Array($variants))\n| filter in(servlet.context.name, Array($service))\n| join [ fetch spans \n    | filter span.kind == \"server\" AND request.is_root_span == true\n], on: { left[trace.id] == right[trace.id] }, prefix:\"server.\"\n| fieldsAdd request.is_failed = coalesce(server.request.is_failed, server.dt.internal.is_failed)\n| makeTimeseries { avg=avg(if(request.is_failed == true, 100, else: 0)) }, by: { service, variant }, bins:250\n","visualization":"barChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"log-level","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg"]},"xAxisScaling":"analyzedTimeframe","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["interval"],"leftYAxisSettings":{"min":0,"max":100}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg"],"value":"sparkline","id":1750094421137}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false,"unitsOverrides":[{"identifier":"avg","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":1750094507375}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"9":{"title":"","type":"data","query":"fetch spans\n| filter feature_flag.key == $feature_flag_key\n| filter in(feature_flag.result.value, Array($variants))\n| filter in(servlet.context.name, Array($service))\n| makeTimeseries count = count(), by: { feature_flag.result.value }","visualization":"barChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["count"]},"xAxisScaling":"analyzedTimeframe","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["interval","count"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["count"],"value":"sparkline","id":1750094683070}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"10":{"title":"","type":"data","query":"fetch spans\n  | filter feature_flag.key == $feature_flag_key\n  | filter in(feature_flag.result.value, $variants)\n  | filter in(servlet.context.name, Array($service))\n  | join [\n    fetch spans\n    | filter request.is_root_span == true\n  ], on: { trace.id }\n  | summarize {\n    avg=avg(right.duration),\n    p50=median(right.duration),\n    p90=percentile(right.duration, 90),\n    p99=percentile(right.duration, 99),\n    failure_rate=avg(if(right.request.is_failed == true, 100, else: 0)),\n    throughput=count()\n    // trace=takeAny(record(start_time, trace.id)) // pick random trace from aggregation bucket\n  }, by: {\n    // dt.entity.service.name, \n    route = right.http.route\n  }","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"11":{"title":"","type":"data","query":"fetch spans\n| filter feature_flag.key == $feature_flag_key\n| summarize \n    evaluation_count = count(),\n    avg_response_time = avg(duration),\n    error_rate = (countIf(status == \"ERROR\") / count()) * 100,\n    by: feature_flag.result.value\n| sort evaluation_count desc\n\n\n\n\n\n\n\n","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","valueAxisScale":"linear"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"","prefixIcon":"AnalyticsIcon","isIconVisible":false,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto","ratio":"auto"},"dataMappings":{},"displayedFields":[],"truncationMode":"middle","labels":{"showLabels":false},"colorMode":"color-palette","colorPalette":"categorical"},"histogram":{"legend":{"position":"auto"},"yAxis":{"label":"Frequency","isLabelVisible":true,"scale":"linear"},"colorPalette":"categorical","dataMappings":[],"variant":"single","truncationMode":"middle"},"valueBoundaries":{"min":"auto","max":"auto"},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}}},"layouts":{"4":{"x":0,"y":3,"w":9,"h":5},"7":{"x":0,"y":0,"w":24,"h":3},"8":{"x":16,"y":3,"w":8,"h":5},"9":{"x":9,"y":3,"w":7,"h":5},"10":{"x":0,"y":10,"w":24,"h":2},"11":{"x":0,"y":8,"w":24,"h":2}},"importedWithCode":false,"settings":{}}